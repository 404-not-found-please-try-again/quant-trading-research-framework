# 多只基金交易配置指南

## 📋 概述

本系统支持同时交易多只基金/ETF。本文档说明如何配置和使用多只基金交易功能。

## 🎯 使用同一个模型 vs 不同模型？

### 推荐：使用同一个模型（如果基金类型相似）

**适用场景：**

- 同类型基金：都是美股 ETF（如 QQQ、SPY、DIA、IWM）
- 特征模式相似：都是股票指数，价格波动规律相似
- 训练数据充足：可以用所有基金的历史数据一起训练

**优点：**

- 数据量更大，模型更稳健
- 只需要训练一次，维护简单
- 模型能学习到更通用的规律

**配置方法：**

1. 在训练时，将多只基金的历史数据合并训练
2. 在模拟盘时，使用同一个模型对每只基金分别预测

### 需要不同模型（如果基金类型差异大）

**适用场景：**

- 不同类型：股票基金 vs 债券基金 vs 商品基金
- 波动特征差异大：价格范围、波动率差异很大
- 相关性低：走势独立，规律不同

**配置方法：**

1. 为每种类型分别训练模型
2. 在模拟盘时，根据基金类型选择对应模型

## ⚙️ 配置步骤

### 步骤 1：修改配置文件

编辑 `config/config.yaml`，添加多只基金：

```yaml
data:
  # 股票代码列表（支持多只）
  symbols:
    - "QQQ" # 纳斯达克100指数ETF
    - "SPY" # 标普500指数ETF
    - "DIA" # 道琼斯指数ETF
    - "IWM" # 罗素2000小盘股ETF
```

### 步骤 2：训练模型（如果使用同一个模型）

如果使用同一个模型，需要重新训练：

```bash
python main.py
```

这会：

- 获取所有基金的历史数据
- 合并训练
- 生成一个通用的模型

### 步骤 3：运行模拟盘

```bash
python paper_trading_main.py --mode daily
```

系统会：

- 为每只基金分别获取数据
- 分别生成特征
- 使用模型分别预测
- 分别为每只基金生成交易信号

## 📊 示例配置

### 配置 1：美股 ETF 组合（推荐同一模型）

```yaml
data:
  symbols:
    - "QQQ" # 科技股
    - "SPY" # 大盘股
    - "DIA" # 蓝筹股
    - "IWM" # 小盘股
```

### 配置 2：多元化组合（可能需要不同模型）

```yaml
data:
  symbols:
    - "QQQ" # 股票ETF
    - "TLT" # 债券ETF
    - "GLD" # 黄金ETF
    - "USO" # 原油ETF
```

## 🔍 如何判断是否需要不同模型？

### 测试方法

1. **相关性分析**：查看基金之间的相关性

   - 如果相关性 > 0.7：建议用同一模型
   - 如果相关性 < 0.5：建议用不同模型

2. **特征分布**：检查特征分布是否相似

   - 如果价格范围、波动率相似：用同一模型
   - 如果差异很大：用不同模型

3. **回测验证**：分别测试
   - 用同一模型对所有基金回测
   - 如果某些基金表现很差，可能需要分别训练

## 💡 最佳实践

1. **从简单开始**：先用同一模型测试同类型基金
2. **观察效果**：如果某些基金表现很差，再考虑分别训练
3. **数据质量**：确保所有基金都有足够的历史数据
4. **特征一致性**：确保所有基金的特征都能正确计算

## 📝 注意事项

1. **数据获取时间**：多只基金会增加数据获取时间
2. **特征计算**：某些基金可能缺少某些特征（需要填充 0）
3. **信号冲突**：多只基金可能同时产生信号，需要资金管理
4. **持仓限制**：确保单只基金不超过最大仓位限制

## 🚀 快速开始

1. 修改 `config/config.yaml` 添加多只基金
2. 运行 `python main.py` 重新训练（如果使用同一模型）
3. 运行 `python paper_trading_main.py --mode daily` 测试

## 📞 问题排查

如果遇到问题：

1. **特征不匹配**：检查所有基金是否都能生成相同的特征
2. **信号为 0**：检查置信度阈值是否过高
3. **模型错误**：检查模型是否支持多只基金的数据格式



